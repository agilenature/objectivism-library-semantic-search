# Phase 16.1: T=0 Baseline (FAIL — Phase 16-02 BLOCKED)

**Date:** 2026-02-24 15:47:47 UTC
**Command:** `python scripts/check_stability.py --store objectivism-library --sample-count 20 --verbose`
**Exit code:** 1
**Verdict:** UNSTABLE (A7 FAIL: 8/20 files not found, tolerance=0)

## Replaces

T+24h check from 2026-02-24 10:12:41 UTC (5/7 PASS, A6 FAIL, A7 FAIL).
Phase 16.1 fixed A6 (SUBSTR prefix extraction, now PASS). A7 remains FAIL.

## Full Output

```
==============================================================
  TEMPORAL STABILITY CHECK v2
==============================================================
  Time:   2026-02-24 15:47:47 UTC
  Store:  objectivism-library
  DB:     /Users/david/projects/objectivism-library-semantic-search/data/library.db
  Query:  'Ayn Rand theory of individual rights and capitalism'
  Sample: 20 indexed files (Assertion 7)
==============================================================

Checking prerequisites...
  .       Resolved store: objectivism-library -> fileSearchStores/objectivismlibrary-9xl9top0qu6u

Loading database...
  .       DB state counts: indexed=1749, untracked=136
  .       Indexed count: 1749

Listing store documents...
  .       Store document count: 1749
  .       Store doc names (sample): ['006gl0nplwn4-j2fh700c5crj', '00jqivefpbmr-kl21errkb2xc', '00zgwu7oap3b-drtd1a2j5pq3']

Structural checks...
  PASS  Assertion 1 -- Count invariant: DB indexed=1749, store docs=1749
  PASS  Assertion 2 -- DB->Store (no ghosts): all 1749 indexed files present in store
  PASS  Assertion 3 -- Store->DB (no orphans): all 1749 store docs match DB records
  PASS  Assertion 4 -- No stuck transitions: 0 files in 'uploading' state

Search + citation resolution...
  .       Querying: 'Ayn Rand theory of individual rights and capitalism'
  PASS  Assertion 5 -- Search returns results: 5 citations returned
  PASS  Assertion 6 -- Citation resolution: all 5 citations resolve to DB records

Per-file searchability sample...
  .       Assertion 7: excluding 333 Episode files (no discriminating metadata)
  .       Assertion 7: querying for 'MOTM_2019-03-03_Passages-from-and-positions-of-Ayn-Rand.txt' via: "What is 'Passages from and positions of Ayn Rand' about?"
  .       Assertion 7: 'MOTM_2019-03-03_Passages-from-and-positions-of-Ayn-Rand.txt' NOT found in top-10 for query "What is 'Passages from and positions of Ayn Rand' about?"
  .       Assertion 7: querying for 'Ayn Rand at Columbia University - Lesson 14 - The _Robber Barons_.txt' via: "What is 'The  Robber Barons' about?"
  .       Assertion 7: querying for 'MOTM_2015-12-06_Academic-Philosophy-Courses.txt' via: "What is 'Academic Philosophy Courses' about?"
  .       Assertion 7: querying for 'Objectivist Logic - Class 09-02.txt' via: "What is 'Objectivist Logic - Class 09-02' about?"
  .       Assertion 7: 'Objectivist Logic - Class 09-02.txt' NOT found in top-10 for query "What is 'Objectivist Logic - Class 09-02' about?"
  .       Assertion 7: querying for 'ITOE Advanced Topics - Class 02-02.txt' via: "What is 'ITOE Advanced Topics - Class 02-02' about?"
  .       Assertion 7: 'ITOE Advanced Topics - Class 02-02.txt' NOT found in top-10 for query "What is 'ITOE Advanced Topics - Class 02-02' about?"
  .       Assertion 7: querying for 'Objectivist Logic - Class 02-02 - Office Hours.txt' via: "What is 'Objectivist Logic - Class 02-02 - Office Hours' about?"
  .       Assertion 7: 'Objectivist Logic - Class 02-02 - Office Hours.txt' NOT found in top-10 for query "What is 'Objectivist Logic - Class 02-02 - Office Hours' about?"
  .       Assertion 7: querying for 'MOTM_2021-06-13_History-of-the-Objectivist-movement-a-personal-account-part.txt' via: "What is 'History of the Objectivist movement a personal account part' about?"
  .       Assertion 7: 'MOTM_2021-06-13_History-of-the-Objectivist-movement-a-personal-account-part.txt' NOT found in top-10 for query "What is 'History of the Objectivist movement a personal account part' about?"
  .       Assertion 7: querying for 'ITOE Advanced Topics - Class 05-02 Office Hour.txt' via: "What is 'ITOE Advanced Topics - Class 05-02 Office Hour' about?"
  .       Assertion 7: 'ITOE Advanced Topics - Class 05-02 Office Hour.txt' NOT found in top-10 for query "What is 'ITOE Advanced Topics - Class 05-02 Office Hour' about?"
  .       Assertion 7: querying for 'Kant_s Philosophy (Part 2)_ Moral Philosophy - Lesson 03 - Formulations of the Categorical Imperative and Duties.txt' via: "What is 'Formulations of the Categorical Imperative and Duties' about?"
  .       Assertion 7: querying for 'Persuasion Mastery - Week 6.txt' via: "What is 'Persuasion Mastery - Week 6' about?"
  .       Assertion 7: querying for 'History of Philosophy - Lesson 22 - Stoicism and the Quest for Apathy.txt' via: "What is 'Stoicism and the Quest for Apathy' about?"
  .       Assertion 7: querying for 'Introduction to Logic - Lesson 04 - Introduction to Deductive Reasoning.txt' via: "What is 'Introduction to Deductive Reasoning' about?"
  .       Assertion 7: querying for 'Leonard Peikoff at the Ford Hall Forum - Lesson 12 - A Philosopher Looks at the O. J. Verdict.txt' via: "What is 'A Philosopher Looks at the O. J. Verdict' about?"
  .       Assertion 7: querying for 'MOTM_2018-09-16_Flourish-Fever.txt' via: "What is 'Flourish Fever' about?"
  .       Assertion 7: querying for 'ITOE Advanced Topics - Class 13-02 - Office Hour.txt' via: "What is 'ITOE Advanced Topics - Class 13-02 - Office Hour' about?"
  .       Assertion 7: 'ITOE Advanced Topics - Class 13-02 - Office Hour.txt' NOT found in top-10 for query "What is 'ITOE Advanced Topics - Class 13-02 - Office Hour' about?"
  .       Assertion 7: querying for 'Objectivism Through Induction - Lesson 08 - The Evil of Initiating Physical Force.txt' via: "What is 'The Evil of Initiating Physical Force' about?"
  .       Assertion 7: querying for 'Leonard Peikoff at the Ford Hall Forum - Lesson 07 - Why Should One Act on Principle_.txt' via: "What is 'Why Should One Act on Principle' about?"
  .       Assertion 7: querying for 'We the Living - Lesson 01 - Ayn Rand and the Writing of We the Living (1).txt' via: "What is 'Ayn Rand and the Writing of We the Living (1)' about?"
  .       Assertion 7: querying for 'Objectivism Seminar - Foundations - Year 2 - Q1 - Week 1 - Objectivism and objectivity.txt' via: "What is 'Objectivism and objectivity' about?"
  .       Assertion 7: querying for 'MOTM_2022-08-21_Thinking-In-Examples.txt' via: "What is 'Thinking In Examples' about?"
  .       Assertion 7: 'MOTM_2022-08-21_Thinking-In-Examples.txt' NOT found in top-10 for query "What is 'Thinking In Examples' about?"
  FAIL  Assertion 7 -- Per-file searchability: 8/20 files not found (tolerance=0): ['MOTM_2019-03-03_Passages-from-and-positions-of-Ayn-Rand.txt', 'Objectivist Logic - Class 09-02.txt', 'ITOE Advanced Topics - Class 02-02.txt', 'Objectivist Logic - Class 02-02 - Office Hours.txt', 'MOTM_2021-06-13_History-of-the-Objectivist-movement-a-personal-account-part.txt']...

==============================================================
  Passed:   6
  Failed:   1
  Warnings: 0
  Elapsed:  152.3s
==============================================================

  VERDICT: UNSTABLE
    * Assertion 7 -- Per-file searchability
```

## Assertion Summary

| Assertion | Result | Detail |
|-----------|--------|--------|
| A1 Count invariant | PASS | DB indexed=1749, store docs=1749 |
| A2 DB->Store | PASS | all 1749 indexed files present in store |
| A3 Store->DB | PASS | all 1749 store docs match DB records |
| A4 No stuck | PASS | 0 files in 'uploading' state |
| A5 Search results | PASS | 5 citations returned |
| A6 Citation resolution | PASS | all 5 citations resolve to DB records |
| A7 Per-file searchability | **FAIL** | 8/20 files not found (tolerance=0) |

## Failure Triage

### Failed files (8 of 20)

**Category A — Course class number files (5 failures):**
These files use `topic == filename stem` (no richer metadata). The query is
`"What is 'Objectivist Logic - Class 09-02' about?"` — a class number string
with no semantic content. Gemini ranks other Objectivist Logic files higher
because the class number does not appear in the transcript content.

1. `Objectivist Logic - Class 09-02.txt` → query stem = "Objectivist Logic - Class 09-02"
2. `ITOE Advanced Topics - Class 02-02.txt` → query stem = "ITOE Advanced Topics - Class 02-02"
3. `Objectivist Logic - Class 02-02 - Office Hours.txt` → query stem = "Objectivist Logic - Class 02-02 - Office Hours"
4. `ITOE Advanced Topics - Class 05-02 Office Hour.txt` → query stem = "ITOE Advanced Topics - Class 05-02 Office Hour"
5. `ITOE Advanced Topics - Class 13-02 - Office Hour.txt` → query stem = "ITOE Advanced Topics - Class 13-02 - Office Hour"

**Category B — MOTM files with generic/partial topics (3 failures):**
Topics exist but are not distinctive enough for Gemini to surface the specific file.

1. `MOTM_2019-03-03_Passages-from-and-positions-of-Ayn-Rand.txt` → topic "Passages from and positions of Ayn Rand" (same topic as many MOTM files on Ayn Rand)
2. `MOTM_2021-06-13_History-of-the-Objectivist-movement-a-personal-account-part.txt` → topic "History of the Objectivist movement a personal account part" (generic historical topic shared with other MOTM files)
3. `MOTM_2022-08-21_Thinking-In-Examples.txt` → topic "Thinking In Examples" (generic pedagogical concept)

### Cross-run consistency

| Run | Failures | Category A | Category B |
|-----|----------|-----------|-----------|
| 16.1-02 initial (n=20) | 4/20 (20%) | 2 (Office Hour) | 2 (MOTM generic) |
| 16.1-03 fresh (n=20) | 8/20 (40%) | 5 (class number/Office Hour) | 3 (MOTM generic) |

The same two failure categories appear in both runs. This is structural — not transient — because:
- The "Other-stem" category (440/1,416 non-Episode indexed files = 31%) produces queries with no semantic discriminating power
- MOTM files with truncated or historical titles compete with many identical-topic files

### Root cause

**Not an indexing bug.** A7 is correct that these files are harder to surface via title-based queries. The zero-tolerance setting exposes a genuine search quality limitation for ~31% of the non-Episode corpus (Other-stem category). This is the same limitation that motivated the original query-specificity tolerance of `max(1, N//5)` in Phase 15.

## Remediation Options

**Option A: Raise A7 tolerance to `max(N//5, 1)` (20% allowance)**
- The Phase 15 tolerance was max(1, N//5) for the 5% failure rate observed at 90-file scale
- At full scale (1,749 files, 31% Other-stem), 20% miss rate is consistent across two runs
- This would allow 4/20 misses — matches the lower bound (16.1-02 run)
- Risk: hides real searchability regressions if they compound with the baseline noise

**Option B: Exclude course class files from A7 sampling (like Episode exclusion)**
- Filter: `filename LIKE '% - Class __-__ %.txt' OR filename LIKE '% - Class __-__.txt'`
- Reduces A7 sample pool but preserves zero-tolerance intent
- Residual risk: MOTM generic topics (~3/468 = 0.6%) might still cause failures
- Drawback: the class-number exclusion pattern is complex and may be incomplete

**Option C: Non-zero tolerance with documented corpus baseline**
- Run --sample-count 100 to get a stable empirical miss rate
- Set tolerance = empirical_p95_miss_rate * sample_count
- Correctly calibrates to real corpus characteristics
- **Recommended if zero-tolerance gate is blocking Phase 16-02 indefinitely**

**Option D: Investigate `retrieved_context.document_name`**
- If Gemini populates `document_name` with the store doc resource name, matching would
  not require content-based ranking — any retrieved document would match
- Would fix all category A failures immediately
- Requires spike to check if `document_name` is populated in the current SDK version

## Phase 16 Temporal Protocol Status

Phase 16-02 remains BLOCKED. Exit 0 at --sample-count 20 has not been achieved.

**Recommendation:** Adopt Option C (empirical tolerance) or Option A (20% tolerance = max(N//5, 1)).
The zero-tolerance setting is correct as an aspiration but empirically wrong for this corpus.
The existing files and metadata have not changed — re-indexing cannot fix this.
