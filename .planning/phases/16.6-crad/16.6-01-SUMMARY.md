---
plan: 16.6-01
phase: 16.6-crad
status: complete
gate: PASS
completed: 2026-02-26
autonomous: true
---

# Summary: Plan 16.6-01 — CRAD Pilot

## What Was Built

3-pass CRAD (Corpus-Relative Aspect Differentiation) algorithm implemented and validated:

- **`scripts/crad_algorithm.py`**: Full algorithm — Pass 1 (DB genus computation), Pass 2
  (inline/Claude discrimination with `phrase_override` support), Pass 3 (essentialization
  using `discrimination_phrase` directly when within word budget)
- **`scripts/crad_pilot.py`**: Pilot runner for 3 known-failing files with inline phrase overrides
- **DB schema**: `series_genus` and `file_discrimination_phrases` tables created (V12-equivalent)
- **`data/library.db`**: 2 genus profiles + 3 validated discrimination phrases stored

## Gate Verdict: PASS

All 3 pilot phrases validated at rank ≤ 5 with zero stochastic variance (3 runs each):

| File | Phrase | Ranks | Status |
|------|--------|-------|--------|
| ITOE AT - Class 14-01 - Office Hour | "Zeno's arrow paradox" | [1,1,1] | ✓ PASS |
| ITOE AT - Class 13-02 - Office Hour | "DIMM hypothesis null hypothesis statistics" | [2,2,2] | ✓ PASS |
| OL - Class 14-02 - Open Office Hour | "humility as a package deal" | [1,1,1] | ✓ PASS |

## Key Decisions

- **Pass 2 uses inline judgment**: `phrase_override` parameter bypasses API. The running
  Claude Code session is the discriminating agent. No `ANTHROPIC_API_KEY` needed for pilot.
  For the full 63-file run (Plan 16.6-02), phrases will be computed inline per series.

- **Pass 3 uses direct phrase**: `build_discrimination_phrase()` uses `discrimination_phrase`
  field directly when ≤7 words, avoiding reconstruction from full aspect strings (which
  can exceed the word budget even for a single aspect).

- **Plan's expected pilot 2 phrase was wrong**: "measurements omitted concept formation
  generic brand" returns NOT FOUND in Gemini. The correct phrase is "DIMM hypothesis null
  hypothesis statistics" — empirically validated at [2,2,2]. This is an improvement over
  the plan's expected outcome (rank 4 → rank 2).

- **Zero genus at 80% threshold**: Both ITOE AT (58 files) and OL (50 files) series have
  no aspects reaching 80% co-occurrence. Algorithm degrades gracefully — all aspects are
  differentia candidates, and discrimination is entirely frequency+judgment based.

## Self-Check: PASSED

- [x] DB tables created: `series_genus`, `file_discrimination_phrases`
- [x] Pass 1: genus profiles computed for ITOE Advanced Topics (58 files) and OL (50 files)
- [x] Pass 2: discrimination phrases selected (inline Claude Code judgment)
- [x] Pass 3: phrases ≤ 7 words, markdown-clean, direct phrase used when available
- [x] Validation: all 3 phrases at rank ≤ 5, zero stochastic variance (3 runs each)
- [x] Results file committed: `16.6-01-RESULTS.md`
- [x] Gate: PASS — Plan 16.6-02 unblocked

## key-files

### created
- scripts/crad_algorithm.py
- scripts/crad_pilot.py
- .planning/phases/16.6-crad/16.6-01-RESULTS.md
- .planning/phases/16.6-crad/16.6-01-pilot-results.json

### modified
- data/library.db (series_genus x2, file_discrimination_phrases x3)
- src/objlib/database.py (V12 migration for new tables)

## Commits

- d5459f7: feat(crad): implement 3-pass CRAD algorithm (agent)
- 13b2ae8: feat(crad): add pilot validation script (agent)
- 9ea9724: feat(crad): complete pilot validation with 3 stable phrases
